// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "./types/input";
import * as outputs from "./types/output";
import * as utilities from "./utilities";

/**
 * !> **Caution: Preview Feature** This feature is considered a preview feature in the provider, regardless of the state of the resource in Snowflake. We do not guarantee its stability. It will be reworked and marked as a stable feature in future releases. Breaking changes are expected, even without bumping the major version. To use this feature, add the relevant feature name to `previewFeaturesEnabled` field in the provider configuration. Please always refer to the Getting Help section in our Github repo to best determine how to get help for your questions.
 *
 * > **Note** Temporary stages are not supported because they result in per-session objects.
 *
 * > **Note** External changes detection on `credentials`, and `encryption` fields are not supported because Snowflake does not return such settings in DESCRIBE or SHOW STAGE output.
 *
 * > **Note** Due to Snowflake limitations, when `directory.auto_refresh` is set to a new value in the configuration, the resource is recreated. When it is unset, the provider alters the whole `directory` field with the `enable` value from the configuration.
 *
 * > **Note** Integration based stages are not allowed to be altered to use privatelink endpoint. You must either alter the storage integration itself, or first unset the storage integration from the stage instead.
 *
 * > **Note** This resource is meant only for S3 stages, not S3-compatible stages. For S3-compatible stages, use the `snowflake.StageExternalS3Compatible` resource instead. Do not use this resource with `s3compat://` URLs.
 *
 * Resource used to manage external S3 stages. For more information, check [external stage documentation](https://docs.snowflake.com/en/sql-reference/sql/create-stage#external-stage-parameters-externalstageparams).
 *
 * ## Example Usage
 *
 * > **Note** Instead of using fully_qualified_name, you can reference objects managed outside Terraform by constructing a correct ID, consult identifiers guide.
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as snowflake from "@pulumi/snowflake";
 *
 * // Basic resource with storage integration
 * const basic = new snowflake.StageExternalS3("basic", {
 *     name: "my_s3_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 * });
 * // Complete resource with all options
 * const complete = new snowflake.StageExternalS3("complete", {
 *     name: "complete_s3_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     storageIntegration: s3.name,
 *     awsAccessPointArn: "arn:aws:s3:us-west-2:123456789012:accesspoint/my-access-point",
 *     encryption: {
 *         awsCse: {
 *             masterKey: s3MasterKey,
 *         },
 *     },
 *     directory: {
 *         enable: true,
 *         refreshOnCreate: "true",
 *         autoRefresh: "false",
 *     },
 *     comment: "Fully configured S3 external stage",
 * });
 * // Resource with AWS key credentials instead of storage integration
 * const withKeyCredentials = new snowflake.StageExternalS3("with_key_credentials", {
 *     name: "s3_stage_with_keys",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     credentials: {
 *         awsKeyId: awsAccessKeyId,
 *         awsSecretKey: awsSecretAccessKey,
 *         awsToken: awsToken,
 *     },
 * });
 * // Resource with AWS IAM role credentials
 * const withRoleCredentials = new snowflake.StageExternalS3("with_role_credentials", {
 *     name: "s3_stage_with_role",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     credentials: {
 *         awsRole: awsRoleArn,
 *     },
 * });
 * // Resource with SSE-S3 encryption
 * const sseS3 = new snowflake.StageExternalS3("sse_s3", {
 *     name: "s3_stage_sse_s3",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     storageIntegration: s3.name,
 *     encryption: {
 *         awsSseS3: {},
 *     },
 * });
 * // Resource with SSE-KMS encryption
 * const sseKms = new snowflake.StageExternalS3("sse_kms", {
 *     name: "s3_stage_sse_kms",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     storageIntegration: s3.name,
 *     encryption: {
 *         awsSseKms: {
 *             kmsKeyId: kmsKeyId,
 *         },
 *     },
 * });
 * // Resource with encryption set to none
 * const noEncryption = new snowflake.StageExternalS3("no_encryption", {
 *     name: "s3_stage_no_encryption",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     storageIntegration: s3.name,
 *     encryption: {
 *         none: {},
 *     },
 * });
 * // resource with inline CSV file format
 * const withCsvFormat = new snowflake.StageExternalS3("with_csv_format", {
 *     name: "s3_csv_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         csv: {
 *             compression: "GZIP",
 *             recordDelimiter: "\n",
 *             fieldDelimiter: "|",
 *             multiLine: "false",
 *             fileExtension: ".csv",
 *             skipHeader: 1,
 *             skipBlankLines: "true",
 *             dateFormat: "AUTO",
 *             timeFormat: "AUTO",
 *             timestampFormat: "AUTO",
 *             binaryFormat: "HEX",
 *             escape: "\\",
 *             escapeUnenclosedField: "\\",
 *             trimSpace: "false",
 *             fieldOptionallyEnclosedBy: "\"",
 *             nullIfs: [
 *                 "NULL",
 *                 "",
 *             ],
 *             errorOnColumnCountMismatch: "true",
 *             replaceInvalidCharacters: "false",
 *             emptyFieldAsNull: "true",
 *             skipByteOrderMark: "true",
 *             encoding: "UTF8",
 *         },
 *     },
 * });
 * // resource with inline JSON file format
 * const withJsonFormat = new snowflake.StageExternalS3("with_json_format", {
 *     name: "s3_json_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         json: {
 *             compression: "AUTO",
 *             dateFormat: "AUTO",
 *             timeFormat: "AUTO",
 *             timestampFormat: "AUTO",
 *             binaryFormat: "HEX",
 *             trimSpace: "false",
 *             multiLine: "false",
 *             nullIfs: [
 *                 "NULL",
 *                 "",
 *             ],
 *             fileExtension: ".json",
 *             enableOctal: "false",
 *             allowDuplicate: "false",
 *             stripOuterArray: "false",
 *             stripNullValues: "false",
 *             replaceInvalidCharacters: "false",
 *             skipByteOrderMark: "false",
 *         },
 *     },
 * });
 * // resource with inline AVRO file format
 * const withAvroFormat = new snowflake.StageExternalS3("with_avro_format", {
 *     name: "s3_avro_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         avro: {
 *             compression: "GZIP",
 *             trimSpace: "false",
 *             replaceInvalidCharacters: "false",
 *             nullIfs: [
 *                 "NULL",
 *                 "",
 *             ],
 *         },
 *     },
 * });
 * // resource with inline ORC file format
 * const withOrcFormat = new snowflake.StageExternalS3("with_orc_format", {
 *     name: "s3_orc_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         orc: {
 *             trimSpace: "false",
 *             replaceInvalidCharacters: "false",
 *             nullIfs: [
 *                 "NULL",
 *                 "",
 *             ],
 *         },
 *     },
 * });
 * // resource with inline Parquet file format
 * const withParquetFormat = new snowflake.StageExternalS3("with_parquet_format", {
 *     name: "s3_parquet_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         parquet: {
 *             compression: "SNAPPY",
 *             binaryAsText: "true",
 *             useLogicalType: "true",
 *             trimSpace: "false",
 *             useVectorizedScanner: "false",
 *             replaceInvalidCharacters: "false",
 *             nullIfs: [
 *                 "NULL",
 *                 "",
 *             ],
 *         },
 *     },
 * });
 * // resource with inline XML file format
 * const withXmlFormat = new snowflake.StageExternalS3("with_xml_format", {
 *     name: "s3_xml_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         xml: {
 *             compression: "AUTO",
 *             preserveSpace: "false",
 *             stripOuterElement: "false",
 *             disableAutoConvert: "false",
 *             replaceInvalidCharacters: "false",
 *             skipByteOrderMark: "false",
 *         },
 *     },
 * });
 * // resource with named file format
 * const withNamedFormat = new snowflake.StageExternalS3("with_named_format", {
 *     name: "s3_named_format_stage",
 *     database: "my_database",
 *     schema: "my_schema",
 *     url: "s3://mybucket/mypath/",
 *     fileFormat: {
 *         formatName: test.fullyQualifiedName,
 *     },
 * });
 * ```
 *
 * > **Note** If a field has a default value, it is shown next to the type in the schema.
 *
 * ## Import
 *
 * ```sh
 * $ pulumi import snowflake:index/stageExternalS3:StageExternalS3 example '"<database_name>"."<schema_name>"."<stage_name>"'
 * ```
 */
export class StageExternalS3 extends pulumi.CustomResource {
    /**
     * Get an existing StageExternalS3 resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: StageExternalS3State, opts?: pulumi.CustomResourceOptions): StageExternalS3 {
        return new StageExternalS3(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'snowflake:index/stageExternalS3:StageExternalS3';

    /**
     * Returns true if the given object is an instance of StageExternalS3.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is StageExternalS3 {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === StageExternalS3.__pulumiType;
    }

    /**
     * Specifies the ARN for an AWS S3 Access Point to use for data transfer.
     */
    declare public readonly awsAccessPointArn: pulumi.Output<string | undefined>;
    /**
     * Specifies a cloud provider for the stage. This field is used for checking external changes and recreating the resources if needed.
     */
    declare public /*out*/ readonly cloud: pulumi.Output<string>;
    /**
     * Specifies a comment for the stage.
     */
    declare public readonly comment: pulumi.Output<string | undefined>;
    /**
     * Specifies the AWS credentials for the external stage.
     */
    declare public readonly credentials: pulumi.Output<outputs.StageExternalS3Credentials | undefined>;
    /**
     * The database in which to create the stage. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    declare public readonly database: pulumi.Output<string>;
    /**
     * Outputs the result of `DESCRIBE STAGE` for the given stage.
     */
    declare public /*out*/ readonly describeOutputs: pulumi.Output<outputs.StageExternalS3DescribeOutput[]>;
    /**
     * Directory tables store a catalog of staged files in cloud storage.
     */
    declare public readonly directory: pulumi.Output<outputs.StageExternalS3Directory | undefined>;
    /**
     * Specifies the encryption settings for the S3 external stage.
     */
    declare public readonly encryption: pulumi.Output<outputs.StageExternalS3Encryption | undefined>;
    /**
     * Specifies the file format for the stage.
     */
    declare public readonly fileFormat: pulumi.Output<outputs.StageExternalS3FileFormat | undefined>;
    /**
     * Fully qualified name of the resource. For more information, see [object name resolution](https://docs.snowflake.com/en/sql-reference/name-resolution).
     */
    declare public /*out*/ readonly fullyQualifiedName: pulumi.Output<string>;
    /**
     * Specifies the identifier for the stage; must be unique for the database and schema in which the stage is created. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * The schema in which to create the stage. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    declare public readonly schema: pulumi.Output<string>;
    /**
     * Outputs the result of `SHOW STAGES` for the given stage.
     */
    declare public /*out*/ readonly showOutputs: pulumi.Output<outputs.StageExternalS3ShowOutput[]>;
    /**
     * Specifies a type for the stage. This field is used for checking external changes and recreating the resources if needed.
     */
    declare public /*out*/ readonly stageType: pulumi.Output<string>;
    /**
     * Specifies the name of the storage integration used to delegate authentication responsibility to a Snowflake identity. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    declare public readonly storageIntegration: pulumi.Output<string | undefined>;
    /**
     * Specifies the URL for the S3 bucket (e.g., 's3://bucket-name/path/').
     */
    declare public readonly url: pulumi.Output<string>;
    /**
     * (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies whether to use a private link endpoint for S3 storage.
     */
    declare public readonly usePrivatelinkEndpoint: pulumi.Output<string | undefined>;

    /**
     * Create a StageExternalS3 resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: StageExternalS3Args, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: StageExternalS3Args | StageExternalS3State, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as StageExternalS3State | undefined;
            resourceInputs["awsAccessPointArn"] = state?.awsAccessPointArn;
            resourceInputs["cloud"] = state?.cloud;
            resourceInputs["comment"] = state?.comment;
            resourceInputs["credentials"] = state?.credentials;
            resourceInputs["database"] = state?.database;
            resourceInputs["describeOutputs"] = state?.describeOutputs;
            resourceInputs["directory"] = state?.directory;
            resourceInputs["encryption"] = state?.encryption;
            resourceInputs["fileFormat"] = state?.fileFormat;
            resourceInputs["fullyQualifiedName"] = state?.fullyQualifiedName;
            resourceInputs["name"] = state?.name;
            resourceInputs["schema"] = state?.schema;
            resourceInputs["showOutputs"] = state?.showOutputs;
            resourceInputs["stageType"] = state?.stageType;
            resourceInputs["storageIntegration"] = state?.storageIntegration;
            resourceInputs["url"] = state?.url;
            resourceInputs["usePrivatelinkEndpoint"] = state?.usePrivatelinkEndpoint;
        } else {
            const args = argsOrState as StageExternalS3Args | undefined;
            if (args?.database === undefined && !opts.urn) {
                throw new Error("Missing required property 'database'");
            }
            if (args?.schema === undefined && !opts.urn) {
                throw new Error("Missing required property 'schema'");
            }
            if (args?.url === undefined && !opts.urn) {
                throw new Error("Missing required property 'url'");
            }
            resourceInputs["awsAccessPointArn"] = args?.awsAccessPointArn;
            resourceInputs["comment"] = args?.comment;
            resourceInputs["credentials"] = args?.credentials;
            resourceInputs["database"] = args?.database;
            resourceInputs["directory"] = args?.directory;
            resourceInputs["encryption"] = args?.encryption;
            resourceInputs["fileFormat"] = args?.fileFormat;
            resourceInputs["name"] = args?.name;
            resourceInputs["schema"] = args?.schema;
            resourceInputs["storageIntegration"] = args?.storageIntegration;
            resourceInputs["url"] = args?.url;
            resourceInputs["usePrivatelinkEndpoint"] = args?.usePrivatelinkEndpoint;
            resourceInputs["cloud"] = undefined /*out*/;
            resourceInputs["describeOutputs"] = undefined /*out*/;
            resourceInputs["fullyQualifiedName"] = undefined /*out*/;
            resourceInputs["showOutputs"] = undefined /*out*/;
            resourceInputs["stageType"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(StageExternalS3.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering StageExternalS3 resources.
 */
export interface StageExternalS3State {
    /**
     * Specifies the ARN for an AWS S3 Access Point to use for data transfer.
     */
    awsAccessPointArn?: pulumi.Input<string>;
    /**
     * Specifies a cloud provider for the stage. This field is used for checking external changes and recreating the resources if needed.
     */
    cloud?: pulumi.Input<string>;
    /**
     * Specifies a comment for the stage.
     */
    comment?: pulumi.Input<string>;
    /**
     * Specifies the AWS credentials for the external stage.
     */
    credentials?: pulumi.Input<inputs.StageExternalS3Credentials>;
    /**
     * The database in which to create the stage. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    database?: pulumi.Input<string>;
    /**
     * Outputs the result of `DESCRIBE STAGE` for the given stage.
     */
    describeOutputs?: pulumi.Input<pulumi.Input<inputs.StageExternalS3DescribeOutput>[]>;
    /**
     * Directory tables store a catalog of staged files in cloud storage.
     */
    directory?: pulumi.Input<inputs.StageExternalS3Directory>;
    /**
     * Specifies the encryption settings for the S3 external stage.
     */
    encryption?: pulumi.Input<inputs.StageExternalS3Encryption>;
    /**
     * Specifies the file format for the stage.
     */
    fileFormat?: pulumi.Input<inputs.StageExternalS3FileFormat>;
    /**
     * Fully qualified name of the resource. For more information, see [object name resolution](https://docs.snowflake.com/en/sql-reference/name-resolution).
     */
    fullyQualifiedName?: pulumi.Input<string>;
    /**
     * Specifies the identifier for the stage; must be unique for the database and schema in which the stage is created. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    name?: pulumi.Input<string>;
    /**
     * The schema in which to create the stage. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    schema?: pulumi.Input<string>;
    /**
     * Outputs the result of `SHOW STAGES` for the given stage.
     */
    showOutputs?: pulumi.Input<pulumi.Input<inputs.StageExternalS3ShowOutput>[]>;
    /**
     * Specifies a type for the stage. This field is used for checking external changes and recreating the resources if needed.
     */
    stageType?: pulumi.Input<string>;
    /**
     * Specifies the name of the storage integration used to delegate authentication responsibility to a Snowflake identity. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    storageIntegration?: pulumi.Input<string>;
    /**
     * Specifies the URL for the S3 bucket (e.g., 's3://bucket-name/path/').
     */
    url?: pulumi.Input<string>;
    /**
     * (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies whether to use a private link endpoint for S3 storage.
     */
    usePrivatelinkEndpoint?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a StageExternalS3 resource.
 */
export interface StageExternalS3Args {
    /**
     * Specifies the ARN for an AWS S3 Access Point to use for data transfer.
     */
    awsAccessPointArn?: pulumi.Input<string>;
    /**
     * Specifies a comment for the stage.
     */
    comment?: pulumi.Input<string>;
    /**
     * Specifies the AWS credentials for the external stage.
     */
    credentials?: pulumi.Input<inputs.StageExternalS3Credentials>;
    /**
     * The database in which to create the stage. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    database: pulumi.Input<string>;
    /**
     * Directory tables store a catalog of staged files in cloud storage.
     */
    directory?: pulumi.Input<inputs.StageExternalS3Directory>;
    /**
     * Specifies the encryption settings for the S3 external stage.
     */
    encryption?: pulumi.Input<inputs.StageExternalS3Encryption>;
    /**
     * Specifies the file format for the stage.
     */
    fileFormat?: pulumi.Input<inputs.StageExternalS3FileFormat>;
    /**
     * Specifies the identifier for the stage; must be unique for the database and schema in which the stage is created. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    name?: pulumi.Input<string>;
    /**
     * The schema in which to create the stage. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    schema: pulumi.Input<string>;
    /**
     * Specifies the name of the storage integration used to delegate authentication responsibility to a Snowflake identity. Due to technical limitations (read more here), avoid using the following characters: `|`, `.`, `"`.
     */
    storageIntegration?: pulumi.Input<string>;
    /**
     * Specifies the URL for the S3 bucket (e.g., 's3://bucket-name/path/').
     */
    url: pulumi.Input<string>;
    /**
     * (Default: fallback to Snowflake default - uses special value that cannot be set in the configuration manually (`default`)) Specifies whether to use a private link endpoint for S3 storage.
     */
    usePrivatelinkEndpoint?: pulumi.Input<string>;
}
